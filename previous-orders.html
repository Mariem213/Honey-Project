<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Previous Orders | L'Or Dore</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Montserrat:wght@200;300;400;500;600&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="css/style.css">

    <style>
        /* Navbar with white background and light shadow (same as About page) */
        #navbar {
            background: #ffffff !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
            border-bottom: none !important;
        }

        #navbar .nav-initial {
            background: #ffffff !important;
            backdrop-filter: none !important;
        }

        #navbar .nav-scrolled {
            background: #ffffff !important;
            backdrop-filter: none !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
        }

        #navbar .logo {
            color: #1c1917 !important;
        }

        #navbar .nav-links a {
            color: #1c1917 !important;
        }

        #navbar .nav-links a.active {
            color: #1c1917 !important;
        }

        #navbar .icon-btn {
            color: #1c1917 !important;
        }

        .orders-page {
            min-height: 100vh;
            padding-top: 125px;
            padding-bottom: 70px;
            background: linear-gradient(145deg, #faf9f7 0%, #fff9f2 100%);
        }

        .orders-wrap {
            max-width: 1080px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .orders-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 26px;
        }

        .orders-heading h1 {
            margin: 0;
            font-family: "Cormorant Garamond", serif;
            font-size: 2.7rem;
            color: #1c1917;
            line-height: 1;
        }

        .orders-heading p {
            margin: 10px 0 0;
            color: #78716c;
            font-size: 0.95rem;
        }

        .orders-summary-chip {
            background: #fff;
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 999px;
            padding: 10px 16px;
            font-size: 0.9rem;
            color: #292524;
        }

        .orders-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .order-card {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(0, 0, 0, 0.07);
            border-radius: 18px;
            box-shadow: 0 14px 28px -24px rgba(0, 0, 0, 0.45);
            overflow: hidden;
        }

        .order-card-head {
            padding: 18px 22px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            background: linear-gradient(180deg, #fffefc 0%, #fffaf4 100%);
        }

        .order-id {
            margin: 0;
            font-size: 0.95rem;
            font-weight: 600;
            color: #1f2937;
        }

        .order-date {
            margin: 4px 0 0;
            font-size: 0.82rem;
            color: #78716c;
        }

        .order-total-pill {
            background: #fff;
            border: 1px solid rgba(218, 131, 10, 0.25);
            color: #c26d09;
            border-radius: 999px;
            padding: 7px 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .order-status-pill {
            border-radius: 999px;
            padding: 6px 11px;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.04em;
            text-transform: uppercase;
        }

        .order-status-pill.delivered {
            background: #ecfdf3;
            color: #047857;
            border: 1px solid #a7f3d0;
        }

        .order-status-pill.processing {
            background: #eff6ff;
            color: #1d4ed8;
            border: 1px solid #bfdbfe;
        }

        .order-status-pill.shipped {
            background: #fff7ed;
            color: #c2410c;
            border: 1px solid #fed7aa;
        }

        .order-items {
            padding: 14px 22px 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .order-item {
            display: grid;
            grid-template-columns: 58px 1fr auto;
            gap: 12px;
            align-items: center;
            padding: 10px;
            border-radius: 12px;
            background: #fcfbf9;
        }

        .order-item img {
            width: 58px;
            height: 58px;
            border-radius: 10px;
            object-fit: cover;
            border: 1px solid rgba(0, 0, 0, 0.06);
        }

        .order-item-name {
            margin: 0;
            color: #1f2937;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .order-item-meta {
            margin: 5px 0 0;
            color: #78716c;
            font-size: 0.82rem;
        }

        .order-item-price {
            color: #1f2937;
            font-size: 0.92rem;
            font-weight: 600;
        }

        .order-card-foot {
            border-top: 1px solid rgba(0, 0, 0, 0.06);
            padding: 14px 22px;
            display: flex;
            gap: 18px;
            align-items: center;
            flex-wrap: wrap;
            color: #57534e;
            font-size: 0.85rem;
        }

        .empty-orders {
            border: 1px dashed #d6d3d1;
            border-radius: 20px;
            background: #fffcf8;
            padding: 44px 24px;
            text-align: center;
        }

        .empty-orders i {
            width: 44px;
            height: 44px;
            color: #a8a29e;
            margin-bottom: 10px;
        }

        .empty-orders h3 {
            margin: 0;
            font-family: "Cormorant Garamond", serif;
            font-size: 1.9rem;
            color: #1f2937;
        }

        .empty-orders p {
            color: #78716c;
            margin: 10px 0 22px;
            font-size: 0.92rem;
        }

        .empty-orders a {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            border: 1px solid #da830a;
            color: #da830a;
            padding: 10px 16px;
            border-radius: 999px;
            font-size: 0.9rem;
            transition: all 0.25s ease;
        }

        .empty-orders a:hover {
            background: #da830a;
            color: #fff;
        }

        @media (max-width: 680px) {
            .orders-heading h1 {
                font-size: 2.2rem;
            }

            .order-item {
                grid-template-columns: 52px 1fr;
            }

            .order-item-price {
                grid-column: 2;
            }
        }
    </style>
</head>

<body>
    <nav id="navbar" class="nav-initial">
        <div class="nav-container max-w-7xl">
            <a href="/" class="logo">L'Or D<span class="gold-accent">o</span>ré</a>
            <div class="nav-links hidden-mobile">
                <a href="/" data-i18n="nav.home">Home</a>
                <a href="/offering.html" data-i18n="nav.shop">Shop</a>
                <a href="/categories.html" data-i18n="nav.collections">Collections</a>
                <a href="/about.html" data-i18n="nav.about">About</a>
                <a href="/contact.html" data-i18n="nav.contact">Contact</a>
            </div>
            <div class="nav-actions">
                <button id="lang-toggle" class="icon-btn"><i data-lucide="globe"></i><span>EN</span></button>
                <button id="search-toggle" class="icon-btn"><i data-lucide="search"></i></button>
                <div id="search-container" class="search-container">
                    <input type="text" id="search-input" class="search-input" placeholder="Search products..."
                        data-i18n-placeholder="nav.search" autocomplete="off">
                    <button id="search-close" class="search-close"><i data-lucide="x"></i></button>
                </div>
                <a href="/auth.html" class="icon-btn hide-mobile"><i data-lucide="user"></i></a>
                <a href="/cart.html" class="icon-btn cart-btn hide-mobile">
                    <i data-lucide="shopping-bag"></i>
                    <span class="cart-dot"></span>
                </a>
                <button id="menu-toggle" class="icon-btn md-hide"><i data-lucide="menu"></i></button>
            </div>
        </div>
    </nav>

    <div id="mobile-menu" class="mobile-sheet">
        <div class="sheet-content">
            <div class="sheet-header">
                <a href="/" class="logo">L'Or D<span class="gold-accent">o</span>ré</a>
                <button id="menu-close" class="close-btn"><i data-lucide="x"></i></button>
            </div>
            <div class="sheet-links">
                <a href="/" data-i18n="nav.home">Home</a>
                <a href="/offering.html" data-i18n="nav.shop">Shop</a>
                <a href="/categories.html" data-i18n="nav.collections">Collections</a>
                <a href="/about.html" data-i18n="nav.about">About</a>
                <a href="/contact.html" data-i18n="nav.contact">Contact</a>
            </div>
            <div class="sheet-actions">
                <a href="/auth.html" class="sheet-action-link">
                    <i data-lucide="user"></i>
                    <span data-i18n="nav.login">Login</span>
                </a>
                <a href="/cart.html" class="sheet-action-link">
                    <i data-lucide="shopping-bag"></i>
                    <span data-i18n="nav.cart">Add to Cart</span>
                </a>
            </div>
        </div>
    </div>

    <main class="orders-page">
        <div class="orders-wrap">
            <div class="orders-top">
                <div class="orders-heading">
                    <h1>Previous Orders</h1>
                    <p>Your complete order history in one place.</p>
                </div>
                <div class="orders-summary-chip" id="orders-count-chip">0 orders</div>
            </div>

            <section id="orders-list" class="orders-list"></section>
        </div>
    </main>

    <footer class="footer section-padding">
        <div class="max-w-7xl">
            <div class="footer-grid">
                <div class="footer-brand">
                    <h3 class="logo-text">L'Or Doré</h3>
                    <p class="footer-desc" data-i18n="footer.desc">
                        Purveyors of the finest, ethically sourced honey from around the world.
                        Nature's liquid gold, delivered to your doorstep.
                    </p>
                </div>

                <div class="footer-links">
                    <h4 data-i18n="footer.explore">Explore</h4>
                    <ul>
                        <li><a href="/offering.html" data-i18n="footer.shopAll">Shop All</a></li>
                        <li><a href="/categories.html" data-i18n="footer.categories">Categories</a></li>
                        <li><a href="/#story" data-i18n="footer.ourStory">Our Story</a></li>
                        <li><a href="/contact.html" data-i18n="footer.contact">Contact</a></li>
                    </ul>
                </div>

                <div class="footer-links">
                    <h4 data-i18n="footer.legal">Legal</h4>
                    <ul>
                        <li><a href="/privacy.html" data-i18n="footer.privacy">Privacy Policy</a></li>
                        <li><a href="/terms.html" data-i18n="footer.terms">Terms of Service</a></li>
                        <li><a href="/shipping.html" data-i18n="footer.shipping">Shipping Info</a></li>
                        <li><a href="/returns.html" data-i18n="footer.returns">Returns</a></li>
                    </ul>
                </div>

                <div class="footer-newsletter">
                    <h4 data-i18n="footer.staySweet">Stay Sweet</h4>
                    <p data-i18n="footer.subscribeDesc">Subscribe for exclusive offers and recipes.</p>
                    <form class="newsletter-form">
                        <input type="email" placeholder="Email address" data-i18n-placeholder="footer.emailPlaceholder"
                            required>
                        <button type="submit" class="btn-join" data-i18n="footer.join">Join</button>
                    </form>
                </div>
            </div>

            <div class="footer-bottom">
                <p data-i18n="footer.copyright">© 2026 L'Or Doré Honey Co. All rights reserved.</p>
                <div class="social-icons">
                    <a href="#"><i data-lucide="instagram"></i></a>
                    <a href="#"><i data-lucide="facebook"></i></a>
                    <a href="#"><i data-lucide="twitter"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <button class="scroll-to-top" id="scrollToTop" aria-label="Scroll to top">
        <i data-lucide="arrow-up"></i>
    </button>

    <script src="js/translations.js"></script>
    <script src="js/language.js"></script>
    <script src="js/main.js"></script>
    <script>
        const ORDERS_KEY = 'honeyOrders';
        const PREVIOUS_ORDERS_CURRENT_USER_KEY = 'honeyCurrentUser';

        function getCurrentUser() {
            try {
                return JSON.parse(localStorage.getItem(PREVIOUS_ORDERS_CURRENT_USER_KEY) || 'null');
            } catch (error) {
                return null;
            }
        }

        function getOrders() {
            try {
                return JSON.parse(localStorage.getItem(ORDERS_KEY) || '[]');
            } catch (error) {
                return [];
            }
        }

        function formatCurrency(value) {
            return `$${Number(value || 0).toFixed(2)}`;
        }

        function formatDate(isoDate) {
            try {
                return new Date(isoDate).toLocaleString([], {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            } catch (error) {
                return isoDate || '-';
            }
        }

        function getStaticDemoOrders(userId) {
            return [
                {
                    id: 'ORD-20260214-1142',
                    userId,
                    createdAt: '2026-02-14T11:42:00.000Z',
                    status: 'delivered',
                    shippingMethod: 'express',
                    subtotal: 88,
                    shippingCost: 25,
                    tax: 0,
                    total: 113,
                    items: [
                        {
                            name: 'Wildflower Reserve',
                            size: '500g',
                            qty: 2,
                            unitPrice: 24,
                            total: 48,
                            image: 'assets/shop1Honey.png'
                        },
                        {
                            name: 'Royal Acacia',
                            size: '350g',
                            qty: 1,
                            unitPrice: 32,
                            total: 32,
                            image: 'assets/shop2Honey.png'
                        },
                        {
                            name: 'Raw Honeycomb',
                            size: '250g',
                            qty: 1,
                            unitPrice: 8,
                            total: 8,
                            image: 'assets/shop3Honey.png'
                        }
                    ]
                },
                {
                    id: 'ORD-20260128-0905',
                    userId,
                    createdAt: '2026-01-28T09:05:00.000Z',
                    status: 'shipped',
                    shippingMethod: 'standard',
                    subtotal: 56,
                    shippingCost: 8,
                    tax: 0,
                    total: 64,
                    items: [
                        {
                            name: 'Raw Honeycomb',
                            size: '250g',
                            qty: 2,
                            unitPrice: 18,
                            total: 36,
                            image: 'assets/shop3Honey.png'
                        },
                        {
                            name: 'Wildflower Reserve',
                            size: '500g',
                            qty: 1,
                            unitPrice: 20,
                            total: 20,
                            image: 'assets/shop1Honey.png'
                        }
                    ]
                },
                {
                    id: 'ORD-20260105-1931',
                    userId,
                    createdAt: '2026-01-05T19:31:00.000Z',
                    status: 'processing',
                    shippingMethod: 'standard',
                    subtotal: 72,
                    shippingCost: 8,
                    tax: 0,
                    total: 80,
                    items: [
                        {
                            name: 'Royal Acacia',
                            size: '350g',
                            qty: 2,
                            unitPrice: 32,
                            total: 64,
                            image: 'assets/shop2Honey.png'
                        },
                        {
                            name: 'Raw Honeycomb',
                            size: '250g',
                            qty: 1,
                            unitPrice: 8,
                            total: 8,
                            image: 'assets/shop3Honey.png'
                        }
                    ]
                }
            ];
        }

        const currentUser = getCurrentUser() || { id: 'demo-user', firstName: 'Demo', lastName: 'User' };

        const allOrders = getOrders();
        const userOrders = allOrders.filter((order) => String(order.userId) === String(currentUser.id));
        const renderedOrders = userOrders.length ? userOrders : getStaticDemoOrders(currentUser.id);
        const ordersListEl = document.getElementById('orders-list');
        const ordersCountChip = document.getElementById('orders-count-chip');
        ordersCountChip.textContent = `${renderedOrders.length} ${renderedOrders.length === 1 ? 'order' : 'orders'}`;

        ordersListEl.innerHTML = renderedOrders.map((order) => {
            const itemsHtml = (order.items || []).map((item) => `
                <div class="order-item">
                    <img src="${item.image || 'https://placehold.co/120x120/f7f7f7/6b7280?text=Honey'}" alt="${item.name || 'Product'}">
                    <div>
                        <p class="order-item-name">${item.name || 'Product'}</p>
                        <p class="order-item-meta">Qty: ${item.qty || 1}${item.size ? ` • Size: ${item.size}` : ''}</p>
                    </div>
                    <p class="order-item-price">${formatCurrency(item.total)}</p>
                </div>
            `).join('');

            const status = String(order.status || 'processing').toLowerCase();
            return `
                <article class="order-card">
                    <div class="order-card-head">
                        <div>
                            <p class="order-id">${order.id || '-'}</p>
                            <p class="order-date">${formatDate(order.createdAt)}</p>
                        </div>
                        <div style="display:flex; gap:8px; align-items:center;">
                            <span class="order-status-pill ${status}">${status}</span>
                            <span class="order-total-pill">${formatCurrency(order.total)}</span>
                        </div>
                    </div>
                    <div class="order-items">${itemsHtml}</div>
                    <div class="order-card-foot">
                        <span>Shipping: ${(order.shippingMethod || 'standard').toUpperCase()}</span>
                        <span>Subtotal: ${formatCurrency(order.subtotal)}</span>
                        <span>Shipping Cost: ${formatCurrency(order.shippingCost)}</span>
                    </div>
                </article>
            `;
        }).join('');

        lucide.createIcons();

        const scrollToTopBtn = document.getElementById('scrollToTop');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.add('visible');
            } else {
                scrollToTopBtn.classList.remove('visible');
            }
        });

        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
</body>

</html>
